<!-- https://momerio.github.io/ -->
<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WordCloudやってみた | Momerio's blog</title>
    <link rel="icon" type="image/x-icon" href="../favicon.jpg">
    <link rel="stylesheet" href="../css/reset.css" />
    <link rel="stylesheet" href="../css/style.css" />
    <link rel="stylesheet" href="../css/header.css" />
    <link rel="stylesheet" href="../css/main.css" />
    <link rel="stylesheet" href="blog-style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <link rel="stylesheet" href="../css/highlight.css" />

    <!-- cards -->
    <meta name="twitter:image:src" content="../favicon.jpg" />
    <meta name="twitter:site" content="momerio blog" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="momerio blog" />
    <meta name="twitter:description" content="Python, Java, PHP and more... - momerio" />
    <meta property="og:image" content="../favicon.jpg" />
    <meta property="og:image:alt" content="Python, Java, PHP and more... - momerio">
    <meta property="og:site_name" content="momerio blog" />
    <meta property="og:type" content="profile" />
    <meta property="og:title" content="momerio blog" />
    <meta property="og:url" content="https://momerio.github.io/" />
    <meta property="og:description" content="Python, Java, PHP and more... - momerio " />
    <meta property="profile:username" content="momerio" />

</head>

<body>
    <!-- Header start -->
    <header class="site-header">
        <div class="wrapper site-header__wrapper">
            <a href="../../index.html" class="brand">Momerio</a>
            <nav class="nav">
                <button class="nav__toggle" aria-expanded="false" type="button">
                    menu
                </button>
                <ul class="nav__wrapper">
                    <!-- <li class="nav__item"><a href="../index.html">Home</a></li> -->
                    <li class="nav__item selected"><a href="index.html">Blog</a></li>
                    <!-- <li class="nav__item"><a href="#">Link</a></li> -->
                    <li class="nav__item"><a href="https://github.com/momerio">Github</a></li>
                </ul>
            </nav>
        </div>
    </header>
    <!-- Header end -->

    <!-- main contents -->
    <div class="main-content">
        <!-- サイドバー デスクトップ向け -->
        <div class="sidebar">
            <!-- bio -->
            <div class="bio">
                <p>
                    プロフィール
                </p>
                <a href="https://github.com/momerio" target="_blank" rel="noopener noreferrer">
                    <img src="../favicon.jpg" alt="momerio"> <!-- 画像 -->
                </a>
                <div id="profile_name"></div>
                <a id="profile_github" href="https://github.com/momerio" target="_blank" rel="noopener noreferrer"></a>
                <div id="profile_details" class="details"></div>
            </div>
            <!-- bio end -->

            <!-- news -->
            <div class="news">
                <!-- 新着記事 -->
                <h1>新着記事</h1>
                <div class="list-box">
                    <li><a id="news1" href="#"></a></li>
                    <li><a id="news2" href="#"></a></li>
                    <li><a id="news3" href="#"></a></li>
                    <li><a id="news4" href="#"></a></li>
                    <li><a id="news5" href="#"></a></li>
                </div>

                <!-- おすすめ -->
                <h1>おすすめ記事</h1>
                <div class="list-box">
                    <li><a id="recommend1" href="#"></a></li>
                    <li><a id="recommend2" href="#"></a></li>
                    <li><a id="recommend3" href="#"></a></li>
                    <li><a id="recommend4" href="#"></a></li>
                    <li><a id="recommend5" href="#"></a></li>
                </div>
            </div>
            <!-- news end -->
        </div>


        <!-- ブログ記事 -->
        <div class="blog">
            <!-- タイトル -->
            <div class="title">WordCloudやってみた</div>

            <!-- 投稿日 -->
            <div class="date">
                <li class="clock-image">2021/09/27</li>
            </div>

            <!-- トップ画像 -->
            <div class="top-image">
                <img src="image\2\2-top.jpg" alt="テスト投稿 | moment">
            </div>

            <!-- 本文 -->
            <div class="article">
                <h1>WordCloudが簡単にできるらしい</h1>
                <p>WordCloudがPythonで簡単にできるらしいのでやってみた．</p>
                <p>WordCloudとは最近流行り?の可視化方法で，単語の頻度の高いものが大きく表示される例のやつである．</p>

                <p>今回は日本語でwordcloudしてみる．</p>

                <p>早速，使ってみよう．</p>
                <p>モジュールのインスコ方法は簡単．pipでインスコできる．</p>
                <pre><code>pip install wordcloud</code></pre>

                <p>ついでにMeCab(形態素解析器)操作モジュールもインスコ．同じくpipでインスコできる．(MeCab本体をインスコしていない人は使えない．本体をインスコしよう．)</p>
                <pre><code>pip install mecab</code></pre>

                <p>まずは，MeCabで分かち書き(単語のスペース区切り)をしてみる</p>
                <pre><code>import MeCab

TEXT = "すもももももももものうち"
tagger = MeCab.Tagger("-Owakati")  # MeCab
wakati = tagger.parse(TEXT)  # 分かち書き
print(wakati)</code></pre>

                <p>次に，wordcloudインスタンスの設定をする．</p>

                <pre><code>wc = wordcloud.WordCloud(font_path=FONT_FILE, 
                    background_color="white", 
                    width=WIDTH, 
                    height=HEIGHT, 
                    collocations=False, 
                    stopwords=STOP_WORDS,
                    max_words=MAX_WORDS,
                    regexp=r"[\w']+")  # WordCloud初期化
wc.generate(parse)  # WordCloud作成
wc.to_file("output.png")  # 画像ファイル出力</code></pre>

                <p>パラメータは色々設定できる．</p>

                <p>widthやheightは出力画像のサイズ(px)，stopwordsをlist型やset型で指定できる．詳細は<a
                        href="https://amueller.github.io/word_cloud/generated/wordcloud.WordCloud.html" target="_blank"
                        rel="noopener noreferrer">リファレンス</a>を参照してほしい．</p>

                <p>こんな感じで日本語のフォントを設定する必要がある．</p>

                <pre><code>FONT_FILE = "C:\Windows\Fonts\MSGOTHIC.TTC"  # フォントファイル指定</code></pre>

                <p>特にフォントのパスを弄ってなかったら，これでMSゴシック体になるはずだ．</p>

                <p>wordcloudを実行して，画像を出力してみよう．</p>

                <pre><code>wc.generate(wakati)  # WordCloud作成
wc.to_file("output.png")  # 画像ファイル出力</code></pre>

                <p>generateメソッドに分かち書きした文章を入れる．to_fileメソッドに出力画像のファイルパスを入れるとOKだ．</p>

                <h1>実行例</h1>
                <p>夏目漱石の『吾輩は猫である』の冒頭部分をwordcloudで可視化してみる．(サンプルプログラムではneko.txtから読み込むようにしている)</p>

                Python
                <pre><code>import wordcloud
import MeCab


with open("neko.txt", "r", encoding="utf-8") as f:
    CONTENTS = f.read().splitlines()
    TEXT = "".join([content for content in CONTENTS if not content == ""])
STOP_WORDS = []  # ストップワードを設定(今回は設定しない)

MAX_WORDS = 2000  # 出力個数の上限
WIDTH = 1000  # 出力画像の幅
HEIGHT = 1000  # 出力画像の高さ
FONT_FILE = "C:\Windows\Fonts\MSGOTHIC.TTC"  # フォントファイル指定

tagger = MeCab.Tagger("-Owakati")  # MeCab
wakati = tagger.parse(TEXT)  # 分かち書き

wc = wordcloud.WordCloud(font_path=FONT_FILE,
            background_color="white",
            width=WIDTH,
            height=HEIGHT,
            collocations=False,
            stopwords=STOP_WORDS,
            max_words=MAX_WORDS,
            regexp=r"[\w']+")  # WordCloud初期化
wc.generate(wakati)  # WordCloud作成
wc.to_file("output.png")  # 画像ファイル出力</code></pre>

                <p>出力結果はこんな感じ．</p>

                <p style="text-align: center;">
                    <img src="image/2/2-output.jpg" alt="wordcloud出力結果" width="80%">
                </p>

                <p>『て』や『が』等の助詞が多く出力されてしまっていることがわかる．</p>
                <p>いちいちストップワードに指定するのは面倒なので，形態素解析時点で不要な品詞を外す必要がある．まだまだ改良の余地がある．</p>

                <p>気が向いたら，改良するかも．</p>

                <h1>参考</h1>
                <p>
                    <li><a href="https://amueller.github.io/word_cloud/generated/wordcloud.WordCloud.html"
                            target="_blank" rel="noopener noreferrer">wordcloudモジュールのリファレンス,
                            https://amueller.github.io/word_cloud/generated/wordcloud.WordCloud.html</a></li>
                </p>
                <p>
                    <li><a href="https://mmtomitomimm.blogspot.com/2018/12/word-cloud.html" target="_blank"
                            rel="noopener noreferrer">PythonでWordCloudを作成してみました,
                            https://mmtomitomimm.blogspot.com/2018/12/word-cloud.html</a></li>
                </p>
            </div>
        </div>

        <!-- 情報カード スマホ向け -->
        <!-- サイドバー -->
        <div class="bottom-card">
            <!-- bio -->
            <div class="bio">
                <div class="image-box">
                    <a href="https://github.com/momerio" target="_blank" rel="noopener noreferrer">
                        <img src="../favicon.jpg" alt="momerio">
                    </a>
                </div>
                <div class="bio-box">
                    <p>
                        プロフィール
                    </p>
                    <div id="profile_name_bottom"></div>
                    <a id="profile_github_bottom" href="https://github.com/momerio" target="_blank"
                        rel="noopener noreferrer"></a>
                    <div id="profile_details_bottom" class="details"></div>
                </div>
            </div>
            <!-- bio end -->

            <!-- news -->
            <div class="news">
                <!-- 新着記事 -->
                <h1>新着記事</h1>
                <div class="list-box">
                    <li><a id="news1_bottom" href="#"></a></li>
                    <li><a id="news2_bottom" href="#"></a></li>
                    <li><a id="news3_bottom" href="#"></a></li>
                    <li><a id="news4_bottom" href="#"></a></li>
                    <li><a id="news5_bottom" href="#"></a></li>
                </div>

                <!-- おすすめ -->
                <h1>おすすめ記事</h1>
                <div class="list-box">
                    <li><a id="recommend1_bottom" href="#"></a></li>
                    <li><a id="recommend2_bottom" href="#"></a></li>
                    <li><a id="recommend3_bottom" href="#"></a></li>
                    <li><a id="recommend4_bottom" href="#"></a></li>
                    <li><a id="recommend5_bottom" href="#"></a></li>
                </div>
            </div>
        </div>
        <!-- 情報カード end -->
    </div>
    <!-- main contens end -->

    <!-- footer -->
    <div class="site-footer"></div>
    <!-- footer end -->

    <!-- js -->
    <script src="blog-common/blog-common.js"></script>
</body>

</html>